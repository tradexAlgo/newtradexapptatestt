export async function sendSms(phoneNumber, otpValue) {
  try {
    if (!API_KEY) {
      throw new Error("Missing TWO_FACTOR_API_KEY in environment variables");
    }

    if (!phoneNumber || !otpValue) {
      throw new Error("Missing phoneNumber or otpValue");
    }

    console.log("üì© Sending SMS...");
    console.log("‚û°Ô∏è Phone:", phoneNumber);
    console.log("‚û°Ô∏è OTP:", otpValue);

    // üëá ensure this is SMS not VOICE
    const url = `https://2factor.in/API/V1/${API_KEY}/SMS/${phoneNumber}/${otpValue}/OTP Validation Template`;

    console.log("‚û°Ô∏è Request URL:", url);

    const response = await axios.get(url);

    console.log("‚úÖ SMS API Response:", response.data);
    return response.data;
  } catch (error) {
    console.error("‚ùå Error sending SMS");

    if (error.response) {
      console.error("‚û°Ô∏è Status:", error.response.status);
      console.error("‚û°Ô∏è Data:", error.response.data);
    } else {
      console.error("‚û°Ô∏è Message:", error.message);
    }

    throw error;
  }
}